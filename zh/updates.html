<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ›´æ–°ä¸æ›´æ–°æ—¥å¿— - Tap & Build: Idle Factory Tycoon</title>
    <meta name="description" content="Tap & Buildçš„æœ€æ–°æ›´æ–°ã€è¡¥ä¸è¯´æ˜å’Œæ›´æ–°æ—¥å¿—ã€‚æŸ¥çœ‹æ¯ä¸ªç‰ˆæœ¬çš„æ–°å†…å®¹ï¼">
    <meta name="robots" content="index, follow">
    
    <link rel="canonical" href="https://tapandbuild.com/zh/updates.html">
    
    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://tapandbuild.com/zh/updates.html">
    <meta property="og:title" content="ğŸ“‹ æ›´æ–°ä¸æ›´æ–°æ—¥å¿— - Tap & Build">
    <meta property="og:description" content="Tap & Buildçš„æœ€æ–°æ›´æ–°ã€è¡¥ä¸è¯´æ˜å’Œæ›´æ–°æ—¥å¿—ã€‚æŸ¥çœ‹æ¯ä¸ªç‰ˆæœ¬çš„æ–°å†…å®¹ï¼">
    <meta property="og:image" content="https://tapandbuild.com/og-facebook.jpg">
    <meta property="og:site_name" content="Tap & Build">
    
    <meta name="theme-color" content="#FF9F1C">
    
    <link rel="icon" href="../favicon.ico" sizes="48x48">
    <link rel="icon" href="../favicon-96.png" type="image/png" sizes="96x96">
    <link rel="icon" href="../favicon-192.png" type="image/png" sizes="192x192">
    <link rel="apple-touch-icon" href="../apple-touch-icon.png" sizes="180x180">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Blog",
        "name": "Tap & Build Updates",
        "description": "Tap & Buildçš„æœ€æ–°æ›´æ–°ã€è¡¥ä¸è¯´æ˜å’Œæ›´æ–°æ—¥å¿—ã€‚æŸ¥çœ‹æ¯ä¸ªç‰ˆæœ¬çš„æ–°å†…å®¹ï¼",
        "url": "https://tapandbuild.com/zh/updates.html",
        "publisher": {
            "@type": "Organization",
            "name": "Habbi Games",
            "logo": "https://tapandbuild.com/favicon-512.png"
        }
    }
    </script>
    
    <link rel="stylesheet" href="../updates-styles.css">
</head>
<body>
    <header>
        <a href="index.html" class="logo-link">
            <div class="logo-icon">ğŸ­</div>
            <span class="logo-text">TAP & BUILD</span>
        </a>
        <h1>ğŸ“‹ æ›´æ–°ä¸æ›´æ–°æ—¥å¿—</h1>
        <p class="subtitle">äº†è§£æœ€æ–°åŠŸèƒ½ã€æ”¹è¿›å’Œé”™è¯¯ä¿®å¤</p>
    </header>

    <div class="container">
        <a href="index.html" class="back-link">â† è¿”å›é¦–é¡µ</a>

        <div id="releases-container">
            <div class="loading">
                <div class="loading-spinner"></div>
                <p>åŠ è½½ç‰ˆæœ¬ä¸­...</p>
            </div>
        </div>

        <div class="cta-section">
            <h2>å‡†å¤‡å¥½å»ºç«‹ä½ çš„å¸å›½äº†å—ï¼Ÿ</h2>
            <p>å…è´¹ä¸‹è½½Tap & Buildï¼Œå¼€å§‹ä½ çš„å·¥å‚å¤§äº¨ä¹‹æ—…ï¼</p>
            <a href="https://play.google.com/store/apps/details?id=com.tapandbuild.game" class="cta-button" target="_blank" rel="noopener">
                <span>â–¶</span> åœ¨Google Playä¸‹è½½
            </a>
        </div>

        <footer>
            <p>Â© 2026 Tap & Build by Habbi Games</p>
            <p style="margin-top: 10px;">
                <a href="privacy.html">éšç§æ”¿ç­–</a> Â· 
                <a href="terms.html">æœåŠ¡æ¡æ¬¾</a> Â· 
                <a href="press.html">åª’ä½“èµ„æ–™</a>
            </p>
        </footer>
    </div>

    <script>
        // Translations object for JavaScript
        const T = {
            latestUpdates: "æœ€æ–°æ›´æ–°",
            buildHistory: "æ„å»ºå†å²",
            earlierBuilds: "æ›´æ—©ç‰ˆæœ¬",
            totalBuilds: "æ€»æ„å»ºæ•°",
            latestBuild: "æœ€æ–°æ„å»º",
            currentVersion: "å½“å‰ç‰ˆæœ¬",
            latest: "æœ€æ–°",
            release: "å‘å¸ƒ",
            build: "æ„å»º",
            changes: "æ›´æ”¹",
            noChanges: "æ— è®°å½•çš„æ›´æ”¹ã€‚",
            noBuilds: "æœªæ‰¾åˆ°æ„å»ºã€‚",
            loadError: "åŠ è½½å†å²è®°å½•å¤±è´¥"
        };

        const BUILDS_URL = '../builds.json';
        const DATE_LOCALE = 'zh-CN';

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString(DATE_LOCALE, {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
        }

        function formatShortDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString(DATE_LOCALE, {
                month: 'short',
                day: 'numeric'
            });
        }

        function renderChanges(changes) {
            if (!changes) return '<p>' + T.noChanges + '</p>';
            const changesList = Array.isArray(changes) ? changes : [changes];
            if (changesList.length === 0) return '<p>' + T.noChanges + '</p>';
            return '<ul>' + changesList.map(change => '<li>' + change + '</li>').join('') + '</ul>';
        }

        function isMajorVersion(version) {
            const taggedVersions = ['1.0.0', '1.2.0', '1.2.1', '1.2.2', '1.3.0', '1.3.1', '1.3.2'];
            return taggedVersions.includes(version);
        }

        function getVersionTitle(build) {
            const titles = {
                49: 'Sound Effects Update',
                48: 'Bug Fixes & Polish',
                47: 'Investment Precision & Version Check',
                45: 'Stability Improvements',
                44: 'Performance Optimizations',
                43: 'UI Polish',
                42: 'Market Improvements',
                41: 'Cloud Save Enhancements',
                40: 'Analytics Integration',
                39: 'Localization Updates',
                38: 'Theme System Refinements',
                37: 'Sharing Improvements',
                36: 'Investment Features',
                35: 'Market System',
                34: 'Dividend Model',
                33: 'Market & UI Changes',
                32: 'Translation Fixes',
                31: 'Minor Fixes',
                30: 'Code Update',
                29: 'Referrals & Sharing',
                28: 'Multilanguage Support',
                27: 'Theme System',
                26: 'Friend Rooms System',
                24: 'Build Optimizations',
                9: 'Actions Workflow',
                8: 'IAP & Remove Ads'
            };
            return titles[build] || T.build + ' ' + build + ' Update';
        }

        function renderBuild(build, isLatest = false, isExpanded = false) {
            const date = formatDate(build.date);
            const changes = renderChanges(build.changes);
            const title = getVersionTitle(build.build);
            const isMajor = isMajorVersion(build.version);
            
            return `
                <article class="update-card ${isLatest ? 'latest' : ''} ${isMajor ? 'major-release' : 'minor-build'}" data-build="${build.build}">
                    <div class="update-header">
                        <div class="version-info">
                            <span class="version">v${build.version}</span>
                            <span class="build-code">${T.build} ${build.build}</span>
                            ${isLatest ? '<span class="version-badge">' + T.latest + '</span>' : ''}
                            ${isMajor ? '<span class="version-badge major">' + T.release + '</span>' : ''}
                        </div>
                        <span class="date">${date}</span>
                    </div>
                    <h2 class="update-title">${title}</h2>
                    <div class="update-body">
                        ${changes}
                    </div>
                </article>
            `;
        }

        function renderCompactBuild(build) {
            const shortDate = formatShortDate(build.date);
            const changes = Array.isArray(build.changes) ? build.changes : [build.changes];
            const mainChange = changes[0] || 'Update';
            const changeCount = changes.length;
            const allChangesHtml = changes.map(c => '<li>' + c + '</li>').join('');
            
            return `
                <div class="timeline-item" data-build="${build.build}" onclick="this.classList.toggle('expanded')">
                    <div class="timeline-marker"></div>
                    <div class="timeline-content">
                        <div class="timeline-header">
                            <span class="timeline-build">${T.build} ${build.build}</span>
                            <span class="timeline-version">v${build.version}</span>
                            ${changeCount > 1 ? '<span class="change-count">' + changeCount + ' ' + T.changes + '</span>' : ''}
                            <span class="timeline-date">${shortDate}</span>
                        </div>
                        <div class="timeline-preview">
                            <span class="expand-icon">â–¶</span>
                            <span>${mainChange}</span>
                        </div>
                        <div class="timeline-changes">
                            <ul>${allChangesHtml}</ul>
                        </div>
                    </div>
                </div>
            `;
        }

        async function loadBuilds() {
            const container = document.getElementById('releases-container');
            
            try {
                const response = await fetch(BUILDS_URL);
                
                if (!response.ok) {
                    throw new Error(T.loadError + ': ' + response.status);
                }
                
                const data = await response.json();
                const builds = data.builds || [];
                
                if (builds.length === 0) {
                    container.innerHTML = '<p class="error-message">' + T.noBuilds + '</p>';
                    return;
                }
                
                builds.sort((a, b) => b.build - a.build);
                
                const latestBuilds = builds.slice(0, 5);
                const olderBuilds = builds.slice(5);
                
                let html = '<div class="section-title">' + T.latestUpdates + '</div>';
                html += latestBuilds.map((build, index) => renderBuild(build, index === 0)).join('');
                
                if (olderBuilds.length > 0) {
                    html += `
                        <div class="section-title timeline-title">
                            ${T.buildHistory} 
                            <span class="build-count">${olderBuilds.length} ${T.earlierBuilds}</span>
                        </div>
                        <div class="timeline">
                            ${olderBuilds.map(build => renderCompactBuild(build)).join('')}
                        </div>
                    `;
                }
                
                html += `
                    <div class="build-stats">
                        <div class="stat">
                            <span class="stat-value">${builds.length}</span>
                            <span class="stat-label">${T.totalBuilds}</span>
                        </div>
                        <div class="stat">
                            <span class="stat-value">${builds[0].build}</span>
                            <span class="stat-label">${T.latestBuild}</span>
                        </div>
                        <div class="stat">
                            <span class="stat-value">v${builds[0].version}</span>
                            <span class="stat-label">${T.currentVersion}</span>
                        </div>
                    </div>
                `;
                
                container.innerHTML = html;
                
            } catch (error) {
                console.error('Error fetching builds:', error);
                container.innerHTML = `
                    <div class="error-message">
                        <p>âš ï¸ ${T.loadError}</p>
                        <p style="margin-top: 10px; font-size: 0.9rem;">${error.message}</p>
                    </div>
                `;
            }
        }

        document.addEventListener('DOMContentLoaded', loadBuilds);
    </script>
</body>
</html>